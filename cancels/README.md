Test for golang chan cancel and drain

